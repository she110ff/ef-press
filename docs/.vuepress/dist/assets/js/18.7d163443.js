(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{375:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"first-app-2-models-and-the-admin-site"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#first-app-2-models-and-the-admin-site"}},[t._v("#")]),t._v(" First App - 2.Models and the admin site")]),t._v(" "),a("p",[t._v("Fist App - 1.Requests and responses 에 이어지는 설명입니다.")]),t._v(" "),a("p",[t._v("학습 목표")]),t._v(" "),a("ol",[a("li",[t._v("데이터베이스 Setup")]),t._v(" "),a("li",[t._v("모델 작성")]),t._v(" "),a("li",[t._v("마이그레이션과 롤백")]),t._v(" "),a("li",[t._v("어드민 사이트 이해")])]),t._v(" "),a("h2",{attrs:{id:"데이터베이스-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#데이터베이스-setup"}},[t._v("#")]),t._v(" 데이터베이스 Setup")]),t._v(" "),a("p",[t._v("site_name/settings.py 파일을 보시면, 일반적인 파이썬 모듈 수준의 변수를 통해서 Django 설정을 하고 있는 것을 볼 수 있습니다.\n")]),a("p",[t._v("\nTIME_ZONE 에는 데이터베이스에서 사용할 사용자의 time zone을 입력합니다. "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones",target:"_blank",rel:"noopener noreferrer"}},[t._v("Time Zone List"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("INSTALLED_APPS 는 활성화 Django 애플리케이션의 목록입니다. 기본적으로 다음과 App이 포함되어 있습니다.")]),t._v(" "),a("ul",[a("li",[t._v("django.contrib.admin – 어드민 사이트")]),t._v(" "),a("li",[t._v("django.contrib.auth – 인증 시스템")]),t._v(" "),a("li",[t._v("django.contrib.contenttypes – 컨텐츠 타입 프레임워크")]),t._v(" "),a("li",[t._v("django.contrib.sessions – 세션 프레임워크.")]),t._v(" "),a("li",[t._v("django.contrib.messages – 메세징 프레임워크.")]),t._v(" "),a("li",[t._v("django.contrib.staticfiles – static 파일 관리")])]),t._v(" "),a("p",[t._v("해당 App을 사용하기 전에 마이그레이션을 해야 합니다.")]),t._v(" "),a("p",[t._v("django 프로젝트를 처음 생성하면 아래와 같이 sqlite를 기반으로 데이터베이스 설정이 작성되어 있습니다. 이 설정을 사용하여 쉽게 django 프로젝트를 시작할 수 있습니다.")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("DATABASES "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ENGINE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'django.db.backends.sqlite3'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NAME'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BASE_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'db.sqlite3'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("ENGINE : sqlite3, postgresql, mysql, oracle 과 3th party cockroachDB, Firebird, MS-SQL 을 사용할 수 있습니다.")]),t._v(" "),a("li",[t._v("NAME : sqlite를 사용한다면 파일의 전체 경로, 다른 데이터베이스라면 DB 이름 입니다.")])]),t._v(" "),a("h2",{attrs:{id:"postgresql-설치하기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#postgresql-설치하기"}},[t._v("#")]),t._v(" PostgreSQL 설치하기")]),t._v(" "),a("p",[t._v("설치 파일을 다운로드 받습니다.\n"),a("a",{attrs:{href:"https://www.enterprisedb.com/downloads/postgres-postgresql-downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("PostgreSQL Download"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"설치-진행-약-5-10분"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#설치-진행-약-5-10분"}},[t._v("#")]),t._v(" 설치 진행 (약 5~10분)")]),t._v(" "),a("ol",[a("li",[t._v("파일을 다운로드한 후에 더블클릭하여 설치를 시작합니다.")]),t._v(" "),a("li",[t._v("PostgreSQL Server, pgAdmin 4, Stack Builder, Command Line Tool 을 선택해서 설치할 수 있습니다.")]),t._v(" "),a("li",[t._v("설치를 진행하면 데이터베이스 슈퍼유저(postgres)의 패스워드를 입력하고 지역을 선택합니다. 포트는 5432로 유지합니다.")]),t._v(" "),a("li",[t._v("설치가 종료되면 pgAdmin 또는 SQL Shell을 실행합니다.")])]),t._v(" "),a("h3",{attrs:{id:"command-line-tool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#command-line-tool"}},[t._v("#")]),t._v(" Command Line Tool")]),t._v(" "),a("p",[t._v("Command line tool 에 SQL Shell 을 입력하고 창을 열면 Server, Database, Port, Usename, Password 를 입력하여 psql 쉘에 접속이 가능합니다.")]),t._v(" "),a("h3",{attrs:{id:"database-만들기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#database-만들기"}},[t._v("#")]),t._v(" database 만들기")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# connect server as user ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" psql -U postgres\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create user")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" CREATE "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("USER")]),t._v(" tms_user WITH PASSWORD "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tms_pass'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create db")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" CREATE DATABASE tms_local WITH OWNER tms_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# create grant")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO tms_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# connect db")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("c tms_local\n\npython manage.py migrate 이후에 \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# show table list")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("dt\n\n                   List of relations\n Schema "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("            Name            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Type  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  Owner\n--------+----------------------------+-------+----------\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" auth_group                 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" auth_group_permissions     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" auth_permission            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" auth_user                  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" auth_user_groups           "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" auth_user_user_permissions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" blog_author                "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" blog_blog                  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" blog_entry                 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" blog_entry_authors         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" django_admin_log           "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" django_content_type        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" django_migrations          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" django_session             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" polls_choice               "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n public "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" polls_question             "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" table "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tms_user\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" rows"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"db-세팅하기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#db-세팅하기"}},[t._v("#")]),t._v(" DB 세팅하기")]),t._v(" "),a("p",[t._v("엔진, DB Name 등을 설정합니다.")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("DATABASES "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ENGINE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'django.db.backends.postgresql'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NAME'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tms_local'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'USER'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tms_user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PASSWORD'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tms_pass'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HOST'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'db'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PORT'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5432'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"마이그레이션"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#마이그레이션"}},[t._v("#")]),t._v(" 마이그레이션")]),t._v(" "),a("p",[t._v("django 패키지에 포함된 모델을 마이그레이션 합니다.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myvenv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" $ python manage.py makemigrations\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myvenv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" $ python manage.py migrate\n")])])]),a("h2",{attrs:{id:"모델-생성"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#모델-생성"}},[t._v("#")]),t._v(" 모델 생성")]),t._v(" "),a("p",[t._v("본질적으로, 모델이란 부가적인 메타데이터를 가진 데이터베이스의 구조(layout)를 말합니다.\n")]),a("p",[t._v("\n다음에서 Question, Choice 두 개의 모델을 만들고 각 Choice 는 Question의 연결이 됩니다.")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# polls/models.py")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Question")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    question_text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    pub_date "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DateTimeField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'date published'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Choice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    question "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_delete"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    choice_text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    votes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IntegerField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("사용자 모델은 django.db.model.Model 의 서브클래스 입니다. 각 모델의 클래스 변수는 데이터베이스 필드를 표현합니다.")]),t._v(" "),a("ul",[a("li",[t._v("각 필드는 django.db.models.Field( "),a("a",{attrs:{href:"https://docs.djangoproject.com/en/3.0/ref/models/fields/#field-types",target:"_blank",rel:"noopener noreferrer"}},[t._v("Field Types"),a("OutboundLink")],1),t._v(") 의 인스턴스 입니다.")]),t._v(" "),a("li",[t._v("필드 인스턴스의 이름 (e.g. question_text or pub_date) 은 데이터베이스 컬럼 이름으로 사용됩니다.")]),t._v(" "),a("li",[t._v("선택적으로 필드의 첫 인자에 human-readable 값을 사용할 수 있습니다. ForeignKey, ManyToManyField and OneToOneField 는 verbose_name 을 사용해야 합니다.")]),t._v(" "),a("li",[t._v("필드의 타입에 따라서 필수 인자를 요구합니다. CharField 의 경우 max_length 가 그러한 예 입니다.")]),t._v(" "),a("li",[t._v("default=0 의 예와 같이, 필드는 여러 선택적 인자를 추가할 수 있습니다.")]),t._v(" "),a("li",[t._v("Django 는 일반적인 관계형 데이터베이스의 Entity 관계(one-to-one, many-to-one, many-to-many )를 제공합니다.")])]),t._v(" "),a("h3",{attrs:{id:"모델-활성화"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#모델-활성화"}},[t._v("#")]),t._v(" 모델 활성화")]),t._v(" "),a("p",[t._v("모델은 적은 코드로 Django에 여러 정보를 제공하고 Django는 다음을 수행할 수 있습니다.")]),t._v(" "),a("ul",[a("li",[t._v("App 을 위한 데이터베이스 스키마를 작성할 수 있습니다.")]),t._v(" "),a("li",[t._v("파이썬 데이터베이스 API 를 만들어 모델 객체에서 접근할 수 있게 만듭니다.")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Django App 은 'pluggable' 하다고 표현합니다. 여러 프로젝트에 사용할 수 있고 배포할 수 있다는 것을 의미합니다.")])]),t._v(" "),a("p",[t._v("모델을 작성한 후에는 INSTALLED_APPS 에 참조를 설정합니다. polls/apps.py 파일의 PollsConifig 의 package path는 polls.apps.PollsConfig 입니다.")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mysite/settings.py")]),t._v("\nINSTALLED_APPS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'polls.apps.PollsConfig'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("polls App 을 위한 마이레이션 파일을 생성합니다.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("python manage.py makemigrations polls\n")])])]),a("p",[t._v("정상적으로 수행이 끝나면 다음과 같은 결과를 볼 수 있습니다.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Migrations "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'polls'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v("\n  polls/migrations/0001_initial.py\n    - Create model Question\n    - Create model Choice\n")])])]),a("p",[t._v("마이그레이션은 Django 에서 모델과 데이터베이스가 어떻게 변경이 있는지를 보여주고 실행하게 됩니다.\n")]),a("p"),t._v(" "),a("h3",{attrs:{id:"마이그레이션-sql-보기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#마이그레이션-sql-보기"}},[t._v("#")]),t._v(" 마이그레이션 SQL 보기")]),t._v(" "),a("p",[t._v("sqlmigrate 명령어는 App, 마이그레이션 이름을 얻어서 해당 마이그레이션이 수행항 sql statement 를 보여줍니다.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("python manage.py sqlmigrate polls 0001\n")])])]),a("p",[t._v("다음과 유사한 결과를 볼 수 있습니다.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#sqlite")]),t._v("\nBEGIN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n--\n-- Create model Question\n--\nCREATE TABLE "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_question"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(" integer NOT NULL PRIMARY KEY AUTOINCREMENT, \n                                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"question_text"')]),t._v(" varchar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" NOT NULL, \n                                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pub_date"')]),t._v(" datetime NOT NULL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n--\n-- Create model Choice\n--\nCREATE TABLE "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_choice"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(" integer NOT NULL PRIMARY KEY AUTOINCREMENT, \n                                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"choice_text"')]),t._v(" varchar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" NOT NULL, \n                                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"votes"')]),t._v(" integer NOT NULL, \n                                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"question_id"')]),t._v(" integer NOT NULL REFERENCES \n                                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_question"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n                                DEFERRABLE INITIALLY DEFERRED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nCREATE INDEX "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_choice_question_id_c5b4b260"')]),t._v(" ON "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_choice"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"question_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nCOMMIT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# psql")]),t._v("\nBEGIN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n--\n-- Create model Question\n--\nCREATE TABLE "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_question"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(" serial NOT NULL PRIMARY KEY,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"question_text"')]),t._v(" varchar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" NOT NULL,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pub_date"')]),t._v(" timestamp with "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" zone NOT NULL\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n--\n-- Create model Choice\n--\nCREATE TABLE "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_choice"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(" serial NOT NULL PRIMARY KEY,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"choice_text"')]),t._v(" varchar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" NOT NULL,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"votes"')]),t._v(" integer NOT NULL,\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"question_id"')]),t._v(" integer NOT NULL\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nALTER TABLE "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_choice"')]),t._v("\n  ADD CONSTRAINT "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_choice_question_id_c5b4b260_fk_polls_question_id"')]),t._v("\n    FOREIGN KEY "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"question_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    REFERENCES "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_question"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    DEFERRABLE INITIALLY DEFERRED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nCREATE INDEX "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_choice_question_id_c5b4b260"')]),t._v(" ON "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"polls_choice"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"question_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nCOMMIT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("실제 결과는 데이터베이스에 따라 상이 합니다.")]),t._v(" "),a("li",[t._v("테이블명은 App과 모델의 이름을 조합한 소문자로 자동 작성이 됩니다.")]),t._v(" "),a("li",[t._v("Primary Key(id) 는 자동으로 추가됩니다.")]),t._v(" "),a("li",[t._v("Foreign key 에 _id 를 자동으로 추가합니다.")]),t._v(" "),a("li",[t._v("데이터베이스에 따라 기술도는 필드 타입들이 존재합니다. 예를 들어 id 필드의 경우 auto_increment (MySQL), serial (PostgreSQL), integer primary key autoincrement (SQLite) 로 Django 에서 자동 생성이 됩니다.")])]),t._v(" "),a("p"),a("p",[t._v("migrate 명령어를 실행하여 polls의 테이블을 생성합니다.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("python manage.py migrate polls\nOperations to perform:\n  Apply all migrations: admin, auth, contenttypes, polls, sessions\nRunning migrations:\n  Applying polls.0001_initial"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". OK\n")])])]),a("h3",{attrs:{id:"필드-삭제-마이그레이션"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#필드-삭제-마이그레이션"}},[t._v("#")]),t._v(" 필드 삭제 마이그레이션")]),t._v(" "),a("p",[t._v("pub_date 필드를 삭제한다면,")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Question")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    question_text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("다음과 같은 프롬프트를 볼 수 있습니다. 1)")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Migrations "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'polls'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v("\n  polls/migrations/0002_remove_question_pub_date.py\n    - Remove field pub_date from question\n")])])]),a("p",[t._v("현재 마이그레이션 상태를 보고, 실행합니다.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("python manage.py showmigrations polls\npolls\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("X"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" 0001_initial\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" 0002_remove_question_pub_date\n\npython manage.py migrate\nOperations to perform:\n  Apply all migrations: admin, auth, contenttypes, polls, sessions\nRunning migrations:\n  Applying polls.0002_remove_question_pub_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". OK\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("MySQL은 Rollback이 불가능하면 테이블을 새로 작성해야 합니다.\n"),a("a",{attrs:{href:"https://docs.djangoproject.com/en/3.0/topics/migrations/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Django Migration"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("check 명령은 마이그레이션과 관련되어 문제를 일으키는 이슈가 있는지 확인 할 수 있습니다.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("python manage.py check\nSystem check identified no issues "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" silenced"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n")])])]),a("h3",{attrs:{id:"이전-마이그레이션으로-rollback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#이전-마이그레이션으로-rollback"}},[t._v("#")]),t._v(" 이전 마이그레이션으로 Rollback")]),t._v(" "),a("p",[t._v("0001 버전으로 Rollback 하고 싶다면,")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("python manage.py migrate polls 0001\nOperations to perform:\n  Target specific migration: 0001_initial, from polls\nRunning migrations:\n  Rendering model states"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". DONE\n  Unapplying polls.0002_remove_question_pub_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". OK\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" ./polls/migrations/0002_remove_question_pub_date.py\n")])])]),a("p",[t._v("Unapplying 후에 polls/migrations/0002_remove_question_pub_date.py 을 디렉토리에서 삭제합니다.")]),t._v(" "),a("h3",{attrs:{id:"필드-추가-마이그레이션"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#필드-추가-마이그레이션"}},[t._v("#")]),t._v(" 필드 추가 마이그레이션")]),t._v(" "),a("p",[t._v("end_date 필드를 추가한다면,")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Question")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    question_text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    pub_date "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DateTimeField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'date published'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    end_date "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'date ended'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("다음과 같은 프롬프트를 볼 수 있습니다. 모델의 변경 상태에 따라 나오는 가이드에 따라 수행하거나 Quit 을 선택하여 모델을 수정합니다.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("You are trying to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" a non-nullable field "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end_date'")]),t._v(" to question without a default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" we can"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t do that (the database needs something to populate existing rows).\nPlease select a fix:\n 1) Provide a one-off default now (will be set on all existing rows with a null value for this column)\n 2) Quit, and let me add a default in models.py\n\n\nSelect an option: 1\nPlease enter the default value now, as valid Python\nThe datetime and django.utils.timezone modules are available, so you can do e.g. timezone.now\nType '")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("' to exit this prompt\n>>> timezone.now\nMigrations for '")]),t._v("polls':\n  polls/migrations/0002_question_end_date.py\n    - Add field end_date to question \n\npython manage.py migrate polls\nOperations to perform:\n  Apply all migrations: polls\nRunning migrations:\n  Applying polls.0002_question_end_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". OK\n\n")])])]),a("h3",{attrs:{id:"sqlite-다운로드"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sqlite-다운로드"}},[t._v("#")]),t._v(" SQLite 다운로드")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://download.sqlitebrowser.org/DB.Browser.for.SQLite-3.12.0-win64.msi",target:"_blank",rel:"noopener noreferrer"}},[t._v("DB Browser for SQLite - Standard installer for 64-bit Windows"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("다음은 프로젝트를 생성한 후 최초 migrate 명령을 수행한 결과입니다.(sqlite)\n")]),a("figure",[a("img",{attrs:{src:"/initial_django_sqlite_migrations.png"}})]),a("p"),t._v(" "),a("h3",{attrs:{id:"마이그레이션-초기화"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#마이그레이션-초기화"}},[t._v("#")]),t._v(" 마이그레이션 초기화")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("python manage.py migrate my_app zero\n")])])]),a("p",[t._v("마이그레이션은 매우 파워풀한 기능입니다. 테이블을 다시 만들거나 하지 않고도 모델이 변경될 때마다  3단계를 따라 실행할 수 있습니다.")]),t._v(" "),a("ol",[a("li",[t._v("모델을 변경합니다.(in models.py)")]),t._v(" "),a("li",[t._v("makemigrations 명령을 실행하여 파일을 생성 합니다.")]),t._v(" "),a("li",[t._v("migrate 명령을 싫행하여 데이터베이스에 변경사항을 적용합니다.")])]),t._v(" "),a("p",[t._v("개발 상의 번거로움이 있음에도 마이그레이션 명령이 두 개(makemigrations, migrate) 으로 나누어진 이유는 버전 컨트롤 시스템에 마이그레이션 파일을 커밋하는 것을 돕기 위해서 입니다.")]),t._v(" "),a("h2",{attrs:{id:"데이터베이스-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#데이터베이스-api"}},[t._v("#")]),t._v(" 데이터베이스 API")]),t._v(" "),a("p",[t._v("파이썬 interactive shell 을 통해 모델 객체의 API를 작동해 보겠습니다.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("python manage.py shell\n")])])]),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" polls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Question  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# App 수준에서 모듈을 임포트합니다. ")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 아직 등록된 question 이 없습나다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("QuerySet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 새로운 Question을 생성합니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Django 에서 tzinfo 를 포함한 pub_date를 필요로 하기 때문에 datetime.datetime.now() 대시 timezone.now() 를 사용합니다. ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" timezone\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("question_text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"What\'s new?"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pub_date"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("timezone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# save() 를 호출하여 데이터베이스에 저장합니다. .")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 레코드는 자동 생성된 ID를 가지고 있습니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 파이썬 속성을 통해 필드에 접근할 수 있습니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("question_text\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"What\'s new?"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pub_date\ndatetime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2012")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("775217")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tzinfo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("UTC"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 속성을 통해 값을 변경한 후에 save()를 호출하여 저장합니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("question_text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"What\'s up?"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# objects.all() 은 데이터베이스에 있는 모든 question 레코드를 보여줍니다. ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("QuerySet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Question "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("object를 조회할 때 '<Question: Question object (1)>'와 같은 값은 도움이 되지 못 합니니다. 따라서 "),a("strong",[t._v("str")]),t._v(" 메소드를 추가하여 레코드의 분별할 수 있는 도움을 줄 수 있습니다.")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# polls/models.py")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Question")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("__str__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("question_text\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Choice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("__str__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("choice_text\n")])])]),a("p",[a("strong",[t._v("str")]),t._v(" 은 interactive 프롬프트 컨벤션만을 위한 것이 아닌 어드민, REST API 에 자동으로 생성되는 결과이기도 합니다.")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("QuerySet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" What's new?"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("추가로 사용자으 메소드를 추가합니다.")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" datetime\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" timezone\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Question")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("was_published_recently")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pub_date "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" timezone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" datetime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timedelta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("days"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("코드의 변경이 생겼고 관련 모듈을 사용해야 한다면 shell 을 다시 실행해야 합니다.")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" polls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Question\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# __str__() 이 잘 작동하는 지 확인합니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("QuerySet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" What's up?"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Django 는 keyword arguments를 통해서 데이터베이스 lookup API 사용할 수 있는 방법을 제공합니다. ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("QuerySet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" What's up?"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("question_text__startswith"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'What'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("QuerySet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" What's up?"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 올해 작성된 question 을 가져옵니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" timezone\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" current_year "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" timezone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("year\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pub_date__year"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("current_year"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" What's up?"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 생성되지 않은 ID를 통해 question을 가져오려고 하면 exception이 발생합니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nTraceback "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("most recent call last"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\nDoesNotExist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Question matching query does "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" exist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# primary key 로 Lookup 하는 것은 매우 일반적인 사용입니다. id=1 과 pk=1 은 같다고 볼 수 있습니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pk"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" What's up?"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 사용자 메소드가 작동하는지 확인합니다. ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pk"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("was_published_recently"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# question 은 여러 쌍의 choice을 가지 수 있습니다. create 메소드는 새로운 choice 객체를 생성하여 추가합니다.  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# relatedobject_set 을 forein key가 작성된 관련 object 를 의미합니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pk"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 아직 choice 가 작성되지 않은 것을 확인합니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("choice_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("QuerySet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# choice 세 개를 생성합니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("choice_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("choice_text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Not much'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" votes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Not much"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("choice_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("choice_text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'The sky'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" votes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" The sky"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" c "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("choice_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("choice_text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Just hacking again'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" votes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Choice object에도 관련된 Question object 에 접근하는 API 가 있습니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("question\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" What's up?"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 그 반대도 역시, Question object는 Choice object에 접근할 수 있습니다.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("choice_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("QuerySet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Not much"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" The sky"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Just hacking again"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("choice_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The API automatically follows relationships as far as you need.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Use double underscores to separate relationships.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This works as many levels deep as you want; there's no limit.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Find all Choices for any question whose pub_date is in this year")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# (reusing the 'current_year' variable we created above).")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# API 를 사용하여 필요한 만큼 자동으로 relationship을 따라 가면 filtering 할 수 있습니다. ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# double underscore 는 relationship을 분리합니다. ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("question__pub_date__year"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("current_year"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("QuerySet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Not much"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" The sky"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Choice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Just hacking again"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 다음은 choice 중에 하나를 삭제하는 방식입니다. ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" c "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" q"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("choice_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("choice_text__startswith"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Just hacking'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delete"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"django-admin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#django-admin"}},[t._v("#")]),t._v(" Django Admin")]),t._v(" "),a("h3",{attrs:{id:"새로운-admin-사용자-생성"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#새로운-admin-사용자-생성"}},[t._v("#")]),t._v(" 새로운 Admin 사용자 생성")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("python manage.py createsuperuser\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Enter your desired username and press enter.")]),t._v("\nUsername: admin\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#You will then be prompted for your desired email address:")]),t._v("\nEmail address: admin@example.com\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The final step is to enter your password. You will be asked to enter your password twice, the second time as a confirmation of the first.")]),t._v("\nPassword: **********\nPassword "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("again"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": *********\nSuperuser created successfully.\n")])])]),a("h3",{attrs:{id:"admin에서-poll-app-데이터-수정하기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#admin에서-poll-app-데이터-수정하기"}},[t._v("#")]),t._v(" Admin에서 poll App 데이터 수정하기")]),t._v(" "),a("p",[t._v("아직 어드민 화면에서 polls App을 볼 수 는 없습니다. App 폴더의 admin.py 에 다음과 같이 코드를 추가합니다.")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# polls/admin.py")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contrib "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" admin\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Question\n\nadmin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("site"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("register"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Question"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("이제 아래와 같이 polls 가 추가된 것을 볼 수 있습니다.\n")]),a("figure",[a("img",{attrs:{src:"/admin03t.png"}})]),a("p")])}),[],!1,null,null,null);s.default=e.exports}}]);