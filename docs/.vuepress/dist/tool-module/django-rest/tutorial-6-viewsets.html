<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>기초-뷰셋 &amp; 라우터 | Knowledge Share</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.3cf712f1.css" as="style"><link rel="preload" href="/assets/js/app.226a413b.js" as="script"><link rel="preload" href="/assets/js/2.73abacf5.js" as="script"><link rel="preload" href="/assets/js/80.37f9db76.js" as="script"><link rel="prefetch" href="/assets/js/10.351a57cb.js"><link rel="prefetch" href="/assets/js/11.6393c270.js"><link rel="prefetch" href="/assets/js/12.258ce84f.js"><link rel="prefetch" href="/assets/js/13.0e799513.js"><link rel="prefetch" href="/assets/js/14.1bed9505.js"><link rel="prefetch" href="/assets/js/15.d3ebe5dd.js"><link rel="prefetch" href="/assets/js/16.f2f87609.js"><link rel="prefetch" href="/assets/js/17.bbd8a445.js"><link rel="prefetch" href="/assets/js/18.7d163443.js"><link rel="prefetch" href="/assets/js/19.19b5b7f6.js"><link rel="prefetch" href="/assets/js/20.829e3d87.js"><link rel="prefetch" href="/assets/js/21.bc454723.js"><link rel="prefetch" href="/assets/js/22.5c67cf08.js"><link rel="prefetch" href="/assets/js/23.3dec653b.js"><link rel="prefetch" href="/assets/js/24.01bbc434.js"><link rel="prefetch" href="/assets/js/25.4f4cd96f.js"><link rel="prefetch" href="/assets/js/26.3d026ee4.js"><link rel="prefetch" href="/assets/js/27.4c1a5062.js"><link rel="prefetch" href="/assets/js/28.b34493f3.js"><link rel="prefetch" href="/assets/js/29.4370a6f6.js"><link rel="prefetch" href="/assets/js/3.0119ca6e.js"><link rel="prefetch" href="/assets/js/30.9b3ad4ec.js"><link rel="prefetch" href="/assets/js/31.eb5641ed.js"><link rel="prefetch" href="/assets/js/32.eaa85e4f.js"><link rel="prefetch" href="/assets/js/33.f93228ab.js"><link rel="prefetch" href="/assets/js/34.482bd009.js"><link rel="prefetch" href="/assets/js/35.77e80232.js"><link rel="prefetch" href="/assets/js/36.6154cdc8.js"><link rel="prefetch" href="/assets/js/37.ad4220f1.js"><link rel="prefetch" href="/assets/js/38.db259bfc.js"><link rel="prefetch" href="/assets/js/39.31066864.js"><link rel="prefetch" href="/assets/js/4.18b7f171.js"><link rel="prefetch" href="/assets/js/40.2f92ff2c.js"><link rel="prefetch" href="/assets/js/41.434423f6.js"><link rel="prefetch" href="/assets/js/42.b226d007.js"><link rel="prefetch" href="/assets/js/43.4022eb0b.js"><link rel="prefetch" href="/assets/js/44.24df495c.js"><link rel="prefetch" href="/assets/js/45.934df6e3.js"><link rel="prefetch" href="/assets/js/46.3c84a5bb.js"><link rel="prefetch" href="/assets/js/47.fe62c0b5.js"><link rel="prefetch" href="/assets/js/48.8e1b28b6.js"><link rel="prefetch" href="/assets/js/49.56580a1b.js"><link rel="prefetch" href="/assets/js/5.96509959.js"><link rel="prefetch" href="/assets/js/50.5a76b24b.js"><link rel="prefetch" href="/assets/js/51.15eefc48.js"><link rel="prefetch" href="/assets/js/52.288a7c9a.js"><link rel="prefetch" href="/assets/js/53.0344e8e6.js"><link rel="prefetch" href="/assets/js/54.051230fc.js"><link rel="prefetch" href="/assets/js/55.0d6d875f.js"><link rel="prefetch" href="/assets/js/56.cb2d6ed4.js"><link rel="prefetch" href="/assets/js/57.e46f3cc2.js"><link rel="prefetch" href="/assets/js/58.a1265c97.js"><link rel="prefetch" href="/assets/js/59.e43d9167.js"><link rel="prefetch" href="/assets/js/6.eafd2c6f.js"><link rel="prefetch" href="/assets/js/60.f6b21a78.js"><link rel="prefetch" href="/assets/js/61.4a860e23.js"><link rel="prefetch" href="/assets/js/62.6ce4d451.js"><link rel="prefetch" href="/assets/js/63.39c70403.js"><link rel="prefetch" href="/assets/js/64.01d48950.js"><link rel="prefetch" href="/assets/js/65.eff11926.js"><link rel="prefetch" href="/assets/js/66.5f7ada7a.js"><link rel="prefetch" href="/assets/js/67.038d3536.js"><link rel="prefetch" href="/assets/js/68.51d474f1.js"><link rel="prefetch" href="/assets/js/69.7b64006b.js"><link rel="prefetch" href="/assets/js/7.9345f576.js"><link rel="prefetch" href="/assets/js/70.026d7c8c.js"><link rel="prefetch" href="/assets/js/71.23fea48d.js"><link rel="prefetch" href="/assets/js/72.66e45e3c.js"><link rel="prefetch" href="/assets/js/73.fd7cba88.js"><link rel="prefetch" href="/assets/js/74.2b525f65.js"><link rel="prefetch" href="/assets/js/75.fa84901e.js"><link rel="prefetch" href="/assets/js/76.a8d34081.js"><link rel="prefetch" href="/assets/js/77.3cc197c2.js"><link rel="prefetch" href="/assets/js/78.38e4043b.js"><link rel="prefetch" href="/assets/js/79.0233dc04.js"><link rel="prefetch" href="/assets/js/8.c76ec235.js"><link rel="prefetch" href="/assets/js/81.739c140e.js"><link rel="prefetch" href="/assets/js/82.db22bc06.js"><link rel="prefetch" href="/assets/js/83.e0a3b10f.js"><link rel="prefetch" href="/assets/js/84.165fae16.js"><link rel="prefetch" href="/assets/js/85.deea94b4.js"><link rel="prefetch" href="/assets/js/86.f08273d4.js"><link rel="prefetch" href="/assets/js/87.693b40b0.js"><link rel="prefetch" href="/assets/js/88.4610ab9a.js"><link rel="prefetch" href="/assets/js/89.534d2db6.js"><link rel="prefetch" href="/assets/js/9.f853c54c.js"><link rel="prefetch" href="/assets/js/90.975fdff4.js"><link rel="prefetch" href="/assets/js/91.18312f77.js"><link rel="prefetch" href="/assets/js/92.79d88ce2.js"><link rel="prefetch" href="/assets/js/93.d66f6efe.js"><link rel="prefetch" href="/assets/js/94.3e4c63cd.js"><link rel="prefetch" href="/assets/js/95.95b09757.js"><link rel="prefetch" href="/assets/js/96.588d599f.js"><link rel="prefetch" href="/assets/js/97.21b640fd.js"><link rel="prefetch" href="/assets/js/98.bd06af5f.js"><link rel="prefetch" href="/assets/js/99.8d1cc7e9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3cf712f1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Knowledge Share</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/languages/python/" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Frameworks</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Frameworks</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frameworks/vscode/" class="nav-link">
  VSCode
</a></li><li class="dropdown-item"><!----> <a href="/frameworks/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/frameworks/vuejs/" class="nav-link">
  VueJS
</a></li><li class="dropdown-item"><!----> <a href="/frameworks/django/" class="nav-link">
  Django
</a></li><li class="dropdown-item"><!----> <a href="/frameworks/nuxtjs/" class="nav-link">
  NuxtJS
</a></li><li class="dropdown-item"><!----> <a href="/frameworks/nestjs/" class="nav-link">
  NestJS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tool &amp; Module" class="dropdown-title"><span class="title">Tool &amp; Module</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tool &amp; Module" class="mobile-dropdown-title"><span class="title">Tool &amp; Module</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool-module/django-rest/" class="nav-link router-link-active">
  Django-REST
</a></li><li class="dropdown-item"><!----> <a href="/tool-module/clean-arch/" class="nav-link">
  Clean Architecture
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Workflow" class="dropdown-title"><span class="title">Workflow</span> <span class="arrow down"></span></button> <button type="button" aria-label="Workflow" class="mobile-dropdown-title"><span class="title">Workflow</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/workflow/nuxtjs-django/" class="nav-link">
  NuxtJS-Django
</a></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/languages/python/" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Frameworks</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Frameworks</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frameworks/vscode/" class="nav-link">
  VSCode
</a></li><li class="dropdown-item"><!----> <a href="/frameworks/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/frameworks/vuejs/" class="nav-link">
  VueJS
</a></li><li class="dropdown-item"><!----> <a href="/frameworks/django/" class="nav-link">
  Django
</a></li><li class="dropdown-item"><!----> <a href="/frameworks/nuxtjs/" class="nav-link">
  NuxtJS
</a></li><li class="dropdown-item"><!----> <a href="/frameworks/nestjs/" class="nav-link">
  NestJS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tool &amp; Module" class="dropdown-title"><span class="title">Tool &amp; Module</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tool &amp; Module" class="mobile-dropdown-title"><span class="title">Tool &amp; Module</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool-module/django-rest/" class="nav-link router-link-active">
  Django-REST
</a></li><li class="dropdown-item"><!----> <a href="/tool-module/clean-arch/" class="nav-link">
  Clean Architecture
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Workflow" class="dropdown-title"><span class="title">Workflow</span> <span class="arrow down"></span></button> <button type="button" aria-label="Workflow" class="mobile-dropdown-title"><span class="title">Workflow</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/workflow/nuxtjs-django/" class="nav-link">
  NuxtJS-Django
</a></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Django REST</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tool-module/django-rest/" aria-current="page" class="sidebar-link">Why Django REST?</a></li><li><a href="/tool-module/django-rest/tutorial-1-serialization.html" class="sidebar-link">기초-직렬화</a></li><li><a href="/tool-module/django-rest/tutorial-2-request.html" class="sidebar-link">기초-요청과 응답</a></li><li><a href="/tool-module/django-rest/tutorial-3-classbase.html" class="sidebar-link">기초-Class View</a></li><li><a href="/tool-module/django-rest/tutorial-4-authentication.html" class="sidebar-link">기초-인증과 권한</a></li><li><a href="/tool-module/django-rest/tutorial-5-relationship.html" class="sidebar-link">기초-관계 &amp; 하이퍼링크</a></li><li><a href="/tool-module/django-rest/tutorial-6-viewsets.html" aria-current="page" class="active sidebar-link">기초-뷰셋 &amp; 라우터</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool-module/django-rest/tutorial-6-viewsets.html#viewset을-사용하기-위한-리팩토링" class="sidebar-link">ViewSet을 사용하기 위한 리팩토링</a></li><li class="sidebar-sub-header"><a href="/tool-module/django-rest/tutorial-6-viewsets.html#viewset을-url에-명시적으로-바인딩" class="sidebar-link">ViewSet을 URL에 명시적으로 바인딩</a></li><li class="sidebar-sub-header"><a href="/tool-module/django-rest/tutorial-6-viewsets.html#라우터-사용" class="sidebar-link">라우터 사용</a></li><li class="sidebar-sub-header"><a href="/tool-module/django-rest/tutorial-6-viewsets.html#viewset와-views-간의-trade-offs" class="sidebar-link">ViewSet와 ViewS 간의 Trade-offs</a></li></ul></li><li><a href="/tool-module/django-rest/generic-view.html" class="sidebar-link">심화-Generic Views</a></li><li><a href="/tool-module/django-rest/viewsets.html" class="sidebar-link">심화-ViewSets</a></li><li><a href="/tool-module/django-rest/serializer.html" class="sidebar-link">심화-Serializers</a></li><li><a href="/tool-module/django-rest/serializer-relations.html" class="sidebar-link">심화-Serializer Relations</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="기초-뷰셋-라우터"><a href="#기초-뷰셋-라우터" class="header-anchor">#</a> 기초-뷰셋 &amp; 라우터</h1> <p>REST 프레임워크에는 <code>ViewSets</code>을 처리하기 위한 추상 객체가 포함되어 있어서 개발자가 API의 상태 및 상호 작용을 모델링 하는 부부에 집중하여 일반적인 규칙에 따라 URL 구성을 자동으로 처리할 수 ​​있습니다.</p> <p><code>ViewSet</code>클래스가 <code>View</code>에 비해 read, 또는 update 같은 기능과 get, put 매소드 핸들러를 제공하는 것을 제외하고 거의 같습니다.</p> <h2 id="viewset을-사용하기-위한-리팩토링"><a href="#viewset을-사용하기-위한-리팩토링" class="header-anchor">#</a> ViewSet을 사용하기 위한 리팩토링</h2> <p>현재 뷰를 ViewSet로 리팩토링 하겠습니다.</p> <p>우선 <code>UserList</code>와 <code>UserDetail</code> view를 하나 <code>UserViewSet</code>으로 리팩토링 하겠습니다. 두 개의 뷰를 제거하고 단일 클래스로 대체 할 수 있습니다.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> viewsets

<span class="token keyword">class</span> <span class="token class-name">UserViewSet</span><span class="token punctuation">(</span>viewsets<span class="token punctuation">.</span>ReadOnlyModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    This viewset automatically provides `list` and `detail` actions.
    &quot;&quot;&quot;</span>
    queryset <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> UserSerializer
</code></pre></div><p>여기서는 '읽기 전용' 작업을 자동으로 제공하기 위해 <code>ReadOnlyModelViewSet</code>클래스를 사용했습니다 . 일반 뷰를 사용할 때 <code>queryset</code>와 <code>serializer_class</code> 을 똑같이 속성에 설정하고 있지만 더 이상 동일한 정보를 별도의 두 클래스에 제공 할 필요는 없습니다.</p> <p>다음으로 <code>SnippetList</code>, <code>SnippetDetail</code> 그리고 <code>SnippetHighlight</code> 세 개의 뷰를 제거하고 다시 단일 클래스로 바꿀 수 있습니다.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> action
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response

<span class="token keyword">class</span> <span class="token class-name">SnippetViewSet</span><span class="token punctuation">(</span>viewsets<span class="token punctuation">.</span>ModelViewSet<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    This viewset automatically provides `list`, `create`, `retrieve`,
    `update` and `destroy` actions.

    Additionally we also provide an extra `highlight` action.
    &quot;&quot;&quot;</span>
    queryset <span class="token operator">=</span> Snippet<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    serializer_class <span class="token operator">=</span> SnippetSerializer
    permission_classes <span class="token operator">=</span> <span class="token punctuation">[</span>permissions<span class="token punctuation">.</span>IsAuthenticatedOrReadOnly<span class="token punctuation">,</span>
                          IsOwnerOrReadOnly<span class="token punctuation">]</span>

    <span class="token decorator annotation punctuation">@action</span><span class="token punctuation">(</span>detail<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> renderer_classes<span class="token operator">=</span><span class="token punctuation">[</span>renderers<span class="token punctuation">.</span>StaticHTMLRenderer<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">highlight</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        snippet <span class="token operator">=</span> self<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> Response<span class="token punctuation">(</span>snippet<span class="token punctuation">.</span>highlighted<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">perform_create</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
        serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span>owner<span class="token operator">=</span>self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
</code></pre></div><p>이번에 기본 읽기 및 쓰기 작업의 전체 세트를 얻기 위해 <code>ModelViewSet</code>클래스를 사용했습니다.</p> <p>또한 <code>@action</code> 데코레이터를 사용하여 <code>highlight</code>라는 맞춤 액션을 만들었습니다. 이 데코레이터는 표준 <code>create/ update/ delete</code> 스타일에 맞지 않는 사용자 정의 엔드-포인트을 추가하는 데 사용할 수 있습니다.</p> <p><code>@action</code> 데코레이터를 사용하는 사용자 지정 작업 GET은 기본적으로 요청(request)에 응답합니다. <code>POST</code> 에 응답하는 액션을 원하면 인수 <code>methods</code>를 사용할 수 있습니다.</p> <p>기본적으로 사용자 정의 액션의 URL은 메소드 이름 자체에 따라 다릅니다. url을 구성하는 방법을 변경하려면 url_path 키워드 인수를 데코레이터에 포함시킬 수 있습니다.</p> <h2 id="viewset을-url에-명시적으로-바인딩"><a href="#viewset을-url에-명시적으로-바인딩" class="header-anchor">#</a> ViewSet을 URL에 명시적으로 바인딩</h2> <p>핸들러 메소드는 URLConf를 정의할 때만 액션에 바인딩 됩니다.</p> <p><code>snippets/urls.py</code>파일에서 ViewSet 클래스를 실제 뷰 세트로 바인딩 합니다.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> snippets<span class="token punctuation">.</span>views <span class="token keyword">import</span> SnippetViewSet<span class="token punctuation">,</span> UserViewSet<span class="token punctuation">,</span> api_root
<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> renderers

snippet_list <span class="token operator">=</span> SnippetViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'get'</span><span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span>
    <span class="token string">'post'</span><span class="token punctuation">:</span> <span class="token string">'create'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
snippet_detail <span class="token operator">=</span> SnippetViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'get'</span><span class="token punctuation">:</span> <span class="token string">'retrieve'</span><span class="token punctuation">,</span>
    <span class="token string">'put'</span><span class="token punctuation">:</span> <span class="token string">'update'</span><span class="token punctuation">,</span>
    <span class="token string">'patch'</span><span class="token punctuation">:</span> <span class="token string">'partial_update'</span><span class="token punctuation">,</span>
    <span class="token string">'delete'</span><span class="token punctuation">:</span> <span class="token string">'destroy'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
snippet_highlight <span class="token operator">=</span> SnippetViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'get'</span><span class="token punctuation">:</span> <span class="token string">'highlight'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> renderer_classes<span class="token operator">=</span><span class="token punctuation">[</span>renderers<span class="token punctuation">.</span>StaticHTMLRenderer<span class="token punctuation">]</span><span class="token punctuation">)</span>
user_list <span class="token operator">=</span> UserViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'get'</span><span class="token punctuation">:</span> <span class="token string">'list'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
user_detail <span class="token operator">=</span> UserViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'get'</span><span class="token punctuation">:</span> <span class="token string">'retrieve'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>각 <code>ViewSets</code>클래스의 개별 뷰를 http 메소드를 액션에 바인딩하여 작성하는 방법에 주목 하십시오.</p> <p>리소스를 구체적 뷰에 바인딩 했으므로 평소처럼 URL conf로 뷰를 등록 할 수 있습니다.</p> <div class="language-python extra-class"><pre class="language-python"><code>urlpatterns <span class="token operator">=</span> format_suffix_patterns<span class="token punctuation">(</span><span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> api_root<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'snippets/'</span><span class="token punctuation">,</span> snippet_list<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'snippet-list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'snippets/&lt;int:pk&gt;/'</span><span class="token punctuation">,</span> snippet_detail<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'snippet-detail'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'snippets/&lt;int:pk&gt;/highlight/'</span><span class="token punctuation">,</span> snippet_highlight<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'snippet-highlight'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'users/'</span><span class="token punctuation">,</span> user_list<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'user-list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'users/&lt;int:pk&gt;/'</span><span class="token punctuation">,</span> user_detail<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'user-detail'</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="라우터-사용"><a href="#라우터-사용" class="header-anchor">#</a> 라우터 사용</h2> <p><code>View</code>클래스 대신 <code>ViewSet</code>클래스를 사용하기 때문에 실제로 URL conf를 직접 디자인 할 필요는 없습니다. 뷰와 URL에 리소스를 연결하는 규칙은 <code>Router</code>클래스를 사용하여 자동으로 처리 할 수 ​​있습니다. 라우터에 적절한 뷰 세트를 등록하고 나머지는 그대로 두면 됩니다.</p> <p>snippets/urls.py파일을 다시 수정합니다.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>routers <span class="token keyword">import</span> DefaultRouter
<span class="token keyword">from</span> snippets <span class="token keyword">import</span> views

<span class="token comment"># Create a router and register our viewsets with it.</span>
router <span class="token operator">=</span> DefaultRouter<span class="token punctuation">(</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">r'snippets'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>SnippetViewSet<span class="token punctuation">)</span>
router<span class="token punctuation">.</span>register<span class="token punctuation">(</span><span class="token string">r'users'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>UserViewSet<span class="token punctuation">)</span>

<span class="token comment"># The API URLs are now determined automatically by the router.</span>
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span>router<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>라우터에 ViewSet을 등록하는 것은 urlpattern 을 제공하는 것과 유사합니다. 뷰의 URL 접두사와 ViewSet 두 가지 인수가 포함됩니다.</p> <p><code>DefaultRouter</code> 클래스도 자동으로 루트 view API(entry point)를 생성하므로 views 모듈에서 <code>api_root</code>메소드를 삭제할 수 있습니다.</p> <h2 id="viewset와-views-간의-trade-offs"><a href="#viewset와-views-간의-trade-offs" class="header-anchor">#</a> ViewSet와 ViewS 간의 Trade-offs</h2> <p>ViewSet을 사용하는 것은 정말 유용한 추상화 일 수 있습니다. 이를 통해 URL 규칙이 API 전체에서 일관성을 유지하고 작성해야 하는 코드의 양을 최소화하며 URL conf의 특성보다는 API가 제공하는 상호 작용 및 표현에 집중할 수 있습니다.</p> <p>그렇다고 항상 올바른 접근 방식이라고 말할 수 있는 것은 아닙니다. 함수 기반 뷰 대신 클래스 기반 뷰를 사용할 때와 비슷한 단점이 있습니다. ViewSet를 사용하는 것은 뷰를 개별적으로 작성하는 것보다 코드의 명확성이 더 적습니다.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tool-module/django-rest/tutorial-5-relationship.html" class="prev">
        기초-관계 &amp; 하이퍼링크
      </a></span> <span class="next"><a href="/tool-module/django-rest/generic-view.html">
        심화-Generic Views
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.226a413b.js" defer></script><script src="/assets/js/2.73abacf5.js" defer></script><script src="/assets/js/80.37f9db76.js" defer></script>
  </body>
</html>
